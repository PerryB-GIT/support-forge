# Module 6.2: Deploying with AWS Amplify
## AI Launchpad Academy - CONFIGURE Phase
### Duration: 20 minutes

---

## OPENING (0:00 - 1:00)

[SCREEN: AWS Amplify logo with deployment graphics]

Amplify is my go-to for deploying web apps. [PAUSE] GitHub push to live site in minutes. Automatic SSL. Custom domains. Built-in CI/CD. It handles the infrastructure so you can focus on building.

[SCREEN: What we're building]

In this lesson, we'll connect a GitHub repository to Amplify, configure build settings, set up a custom domain with SSL, and understand environment variables for keeping secrets safe.

[SCREEN: Prerequisites check]

You'll need a GitHub account with a repository to deploy. [PAUSE] If you've been following along, you've got projects ready. If not, fork any Next.js starter template.

---

## CONNECTING GITHUB TO AMPLIFY (1:00 - 5:00)

[SCREEN: AWS Console - Amplify]

Search "Amplify" in the AWS console and open it.

[SCREEN: Amplify landing page]

If this is your first time, you'll see an intro screen. [PAUSE] Click "Create new app."

[SCREEN: Source options]

Amplify asks where your code lives. [PAUSE] Select "GitHub." Other options exist - GitLab, Bitbucket, CodeCommit - but GitHub is most common.

[SCREEN: GitHub authorization]

Click "Connect." [PAUSE] This opens GitHub authorization. Grant Amplify access to your repositories.

[SCREEN: Repository selection]

Now select your repository and branch. [PAUSE] Typically you'll deploy from `main` or `master`. Pick the branch that represents production-ready code.

[SCREEN: Monorepo option]

If your app is in a subdirectory, check "My app is a monorepo" and enter the path. [PAUSE] Common for organized codebases.

[SCREEN: App name configuration]

Give your app a name. [PAUSE] This is internal to Amplify - something descriptive like "client-website-production."

---

## BUILD SETTINGS CONFIGURATION (5:00 - 9:00)

[SCREEN: Build settings page]

Amplify auto-detects your framework. [PAUSE] Next.js, React, Vue, plain HTML - it usually figures it out.

[SCREEN: Auto-detected settings]

For a Next.js app, it knows to run `npm install` and `npm run build`. [PAUSE] The output directory is `.next` for SSR or `out` for static export.

[SCREEN: amplify.yml file]

You can also define settings with an `amplify.yml` file in your repo root. [PAUSE] This gives you version-controlled configuration.

Here's a typical Next.js configuration:

```yaml
version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: .next
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
```

[SCREEN: Build phases explanation]

**preBuild:** Install dependencies. [PAUSE] `npm ci` is faster and more reliable than `npm install` for CI environments.

**build:** Compile your application.

**artifacts:** What files to deploy.

**cache:** What to save between builds for speed.

[SCREEN: Environment variables section]

Now the important part: environment variables.

[SCREEN: Adding environment variables]

Click "Edit" under Environment variables. [PAUSE] Add your secrets here:

- `NEXT_PUBLIC_API_URL` - Your API endpoint
- `ANTHROPIC_API_KEY` - Claude API key (if server-side)
- `DATABASE_URL` - Database connection string

[SCREEN: Server vs client variables]

Critical distinction: [PAUSE] Variables prefixed with `NEXT_PUBLIC_` are exposed to the browser. Everything else stays server-side only.

Never put secret keys in `NEXT_PUBLIC_` prefixed variables. [PAUSE] They'll be visible in your JavaScript bundle.

[SCREEN: Save and deploy]

Review your settings and click "Save and deploy."

---

## WATCHING YOUR FIRST DEPLOYMENT (9:00 - 11:30)

[SCREEN: Build progress page]

Amplify starts building immediately. [PAUSE] You can watch the logs in real-time.

[SCREEN: Build stages]

The stages:
1. **Provision:** Spinning up build environment
2. **Build:** Running your build commands
3. **Deploy:** Pushing to edge locations
4. **Verify:** Confirming everything works

[SCREEN: Build logs scrolling]

Watch the logs. [PAUSE] If something fails, this is where you'll find out why. Most common issues:

- Missing environment variables
- Build command errors
- Package installation failures

[SCREEN: Successful deployment]

Green checkmarks across the board. [PAUSE] Your app is live.

[SCREEN: Amplify-provided URL]

Amplify gives you a URL like `main.abc123xyz.amplifyapp.com`. [PAUSE] It's live, it's got SSL, and it works. But you probably want your own domain.

---

## CUSTOM DOMAIN SETUP (11:30 - 16:00)

[SCREEN: Domain management section]

Click "Hosting" then "Custom domains."

[SCREEN: Add domain]

Click "Add domain."

[SCREEN: Domain entry]

Enter your domain - let's say `yourbusiness.com`. [PAUSE] Amplify will verify you own it.

[SCREEN: Subdomain configuration]

Configure your subdomains:
- `yourbusiness.com` - Main production site
- `www.yourbusiness.com` - Redirects to root domain

[SCREEN: SSL certificate]

Amplify automatically provisions an SSL certificate. [PAUSE] This takes a few minutes. Amazon Certificate Manager handles it.

[SCREEN: DNS configuration]

Now the tricky part: DNS configuration. [PAUSE] You need to point your domain to Amplify.

[SCREEN: DNS provider options - showing GoDaddy example]

If your domain is on GoDaddy, Route53, or another provider, you'll add these records:

[SCREEN: CNAME record example]

**For subdomains (www):**
- Type: CNAME
- Name: www
- Value: [Amplify provides this - looks like d123abc.cloudfront.net]

[SCREEN: ANAME/ALIAS record example]

**For root domain:**
- Type: ANAME or ALIAS (if supported)
- Name: @ or blank
- Value: [The Amplify target]

[SCREEN: Alternative - AWS nameservers]

Alternatively, point your domain's nameservers to Route53 and let AWS handle everything. [PAUSE] More setup upfront, easier management long-term.

[SCREEN: DNS propagation]

DNS changes take time to propagate - anywhere from minutes to 48 hours. [PAUSE] Usually it's under an hour. Amplify shows verification status.

[SCREEN: Successful domain connection]

Once verified, your custom domain is live with full SSL. [PAUSE] `https://yourbusiness.com` serves your Amplify app.

---

## CONTINUOUS DEPLOYMENT (16:00 - 18:00)

[SCREEN: Git workflow diagram]

Here's the magic of Amplify: [PAUSE] push code, automatic deploy.

[SCREEN: Making a code change]

Every time you push to your connected branch, Amplify:
1. Detects the change
2. Pulls the code
3. Runs the build
4. Deploys if successful

[SCREEN: Branch-based deployments]

You can connect multiple branches:
- `main` -> production (yourbusiness.com)
- `staging` -> preview (staging.yourbusiness.com)
- `feature/*` -> auto-generated preview URLs

[SCREEN: Pull request previews]

Enable PR previews. [PAUSE] Every pull request gets its own deployment URL. Review changes live before merging.

[SCREEN: Preview settings]

In App settings, find "Previews" and enable them. [PAUSE] Now collaborators can see exactly what their PR will look like in production.

---

## TROUBLESHOOTING COMMON ISSUES (18:00 - 19:30)

[SCREEN: Build failed icon]

Builds fail. [PAUSE] It happens. Here's how to debug.

[SCREEN: Issue 1 - Missing env vars]

**Issue: Build fails with undefined variables**

Check that all required environment variables are set in Amplify console. [PAUSE] They don't sync from your local `.env` file.

[SCREEN: Issue 2 - Memory limits]

**Issue: Build runs out of memory**

Amplify has memory limits. For large apps, increase compute settings in App settings > Build settings > Build image settings.

[SCREEN: Issue 3 - Wrong build command]

**Issue: Wrong build output**

Make sure artifacts baseDirectory matches your framework's output. [PAUSE] Next.js SSR uses `.next`, static export uses `out`.

[SCREEN: Issue 4 - SSL certificate pending]

**Issue: SSL certificate stuck pending**

DNS isn't configured correctly. [PAUSE] Double-check your CNAME or ALIAS records match exactly what Amplify expects.

[SCREEN: Logs are your friend]

Always check the build logs. [PAUSE] The error message is usually there, just buried in output.

---

## CLOSING (19:30 - 20:00)

[SCREEN: Deployment success visualization]

You've deployed a real application. [PAUSE] Code in GitHub, automatically built and deployed to global edge locations, custom domain with SSL. Professional infrastructure.

[SCREEN: What Amplify handles for you]

Amplify handles:
- Server provisioning
- SSL certificates
- CDN distribution
- Automatic scaling
- Zero-downtime deploys

You focus on building.

[SCREEN: Next lesson preview]

Next: Google Cloud Platform for AI workloads. [PAUSE] Different platform, different strengths - especially for AI-specific services.

[SCREEN: Practice assignment]

Deploy something today. [PAUSE] Take a project you've built and put it live. There's nothing like seeing your work on a real URL.

[SCREEN: End card]

See you in the next one.

---

## PRODUCTION NOTES

**Total Runtime:** 20 minutes
**Tone:** Hands-on deployment guide, confidence-building
**Key Visuals:**
- Amplify console screen recordings
- Build log progression
- DNS configuration examples
- Custom domain verification

**B-Roll Suggestions:**
- GitHub pushes triggering builds
- Green checkmark animations
- Globe/edge location graphics for CDN

**Technical Accuracy:**
- Test with actual Next.js deployment
- Verify amplify.yml syntax
- Confirm current Amplify UI matches script

**Viewer Prerequisites:**
- AWS account configured (from 6.1)
- GitHub account with repository
- Domain name (optional but recommended)

---
